# APT GraphRAG - é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´æ–‡ä»¶æ¸…å•

```
apt_graph_rag/
â”œâ”€â”€ __init__.py                    # åŒ…åˆå§‹åŒ–ï¼Œå¯¼å‡ºæ ¸å¿ƒç±»
â”œâ”€â”€ README.md                      # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ INTEGRATION.md                 # APTé›†æˆæŒ‡å—  
â”œâ”€â”€ PROJECT_STRUCTURE.md           # æœ¬æ–‡ä»¶ - ç»“æ„è¯´æ˜
â”‚
â”œâ”€â”€ generalized_graph.py           # æ³›å›¾æ ¸å¿ƒ (1200+ è¡Œ)
â”‚   â”œâ”€â”€ Cell                       # ç»†èƒç±»
â”‚   â””â”€â”€ GeneralizedGraph           # æ³›å›¾ä¸»ç±»
â”‚       â”œâ”€â”€ åŸºç¡€æ“ä½œ (æ·»åŠ /åˆ é™¤/æŸ¥è¯¢)
â”‚       â”œâ”€â”€ æ‹“æ‰‘æŸ¥è¯¢ (è¾¹ç•Œ/é‚»å±…/åº¦æ•°)
â”‚       â”œâ”€â”€ é“¾å¤å½¢éªŒè¯
â”‚       â”œâ”€â”€ å…³è”çŸ©é˜µè®¡ç®—
â”‚       â””â”€â”€ æŒä¹…åŒ– (ä¿å­˜/åŠ è½½)
â”‚
â”œâ”€â”€ hodge_laplacian.py             # Hodge-Laplacianè°±åˆ†æ (600+ è¡Œ)
â”‚   â””â”€â”€ HodgeLaplacian
â”‚       â”œâ”€â”€ å¤–å¾®åˆ†/ä½™å¾®åˆ†ç®—å­
â”‚       â”œâ”€â”€ Laplacianè®¡ç®—
â”‚       â”œâ”€â”€ è°±åˆ†è§£
â”‚       â”œâ”€â”€ Bettiæ•°è®¡ç®—
â”‚       â”œâ”€â”€ æ¬§æ‹‰ç¤ºæ€§æ•°
â”‚       â””â”€â”€ Hodgeåˆ†è§£
â”‚
â”œâ”€â”€ graph_brain.py                 # å›¾è„‘åŠ¨åŠ›å­¦å¼•æ“ (800+ è¡Œ)
â”‚   â”œâ”€â”€ GraphBrainState            # çŠ¶æ€å¿«ç…§ç±»
â”‚   â””â”€â”€ GraphBrainEngine
â”‚       â”œâ”€â”€ è‡ªç”±èƒ½è®¡ç®—
â”‚       â”œâ”€â”€ åŠ¨åŠ›å­¦æ¼”åŒ–
â”‚       â”œâ”€â”€ æ‹“æ‰‘ç›¸å˜ (CPHL)
â”‚       â”œâ”€â”€ æ¿€æ´»ä¼ æ’­
â”‚       â””â”€â”€ ç»Ÿè®¡ä¸æŠ¥å‘Š
â”‚
â”œâ”€â”€ graph_rag_manager.py           # GraphRAGç®¡ç†å™¨ (700+ è¡Œ)
â”‚   â””â”€â”€ GraphRAGManager
â”‚       â”œâ”€â”€ çŸ¥è¯†æ·»åŠ  (ä¸‰å…ƒç»„)
â”‚       â”œâ”€â”€ ç´¢å¼•æ„å»º
â”‚       â”œâ”€â”€ å¤šæ¨¡å¼æŸ¥è¯¢
â”‚       â”œâ”€â”€ ç»Ÿè®¡ä¸å¯è§†åŒ–
â”‚       â””â”€â”€ æŒä¹…åŒ–
â”‚
â””â”€â”€ demo_full.py                   # å®Œæ•´åŠŸèƒ½æ¼”ç¤º (400+ è¡Œ)
    â”œâ”€â”€ ç¬¬ä¸€éƒ¨åˆ†: æ³›å›¾åŸºç¡€
    â”œâ”€â”€ ç¬¬äºŒéƒ¨åˆ†: Hodge-Laplacian
    â”œâ”€â”€ ç¬¬ä¸‰éƒ¨åˆ†: å›¾è„‘åŠ¨åŠ›å­¦
    â”œâ”€â”€ ç¬¬å››éƒ¨åˆ†: GraphRAGç³»ç»Ÿ
    â””â”€â”€ ç¬¬äº”éƒ¨åˆ†: é«˜çº§ç‰¹æ€§
```

## ğŸ“Š ä»£ç è§„æ¨¡ç»Ÿè®¡

| æ¨¡å— | è¡Œæ•° | åŠŸèƒ½æ•° | æ ¸å¿ƒç±» |
|------|------|--------|--------|
| generalized_graph.py | ~1200 | 30+ | 2 |
| hodge_laplacian.py | ~600 | 15+ | 1 |
| graph_brain.py | ~800 | 20+ | 2 |
| graph_rag_manager.py | ~700 | 15+ | 1 |
| å…¶ä»–æ–‡ä»¶ | ~600 | - | - |
| **æ€»è®¡** | **~3900** | **80+** | **6** |

## ğŸ” æ¨¡å—ä¾èµ–å…³ç³»

```
GraphRAGManager (æœ€ä¸Šå±‚)
    â”œâ”€â”€ GeneralizedGraph (æ•°æ®ç»“æ„)
    â”œâ”€â”€ HodgeLaplacian (è°±åˆ†æ)
    â”‚   â””â”€â”€ GeneralizedGraph
    â””â”€â”€ GraphBrainEngine (åŠ¨åŠ›å­¦)
        â””â”€â”€ GeneralizedGraph
        â””â”€â”€ HodgeLaplacian
```

## ğŸ¯ æ ¸å¿ƒç±»è¯¦è§£

### 1. GeneralizedGraph (æ³›å›¾)

**èŒè´£**: ç»Ÿä¸€çš„é«˜ç»´å›¾æ•°æ®ç»“æ„

**å…³é”®æ–¹æ³•**:
- `add_cell(dim, id, boundary)` - æ·»åŠ p-ç»†èƒ
- `compute_incidence_matrix(p)` - è®¡ç®—å…³è”çŸ©é˜µB_p
- `get_boundary(dim, id)` - è·å–è¾¹ç•Œ
- `get_neighbors(dim, id)` - è·å–é‚»å±…
- `from_edge_list(edges)` - ä»è¾¹åˆ—è¡¨æ„å»º
- `from_knowledge_triples(triples)` - ä»ä¸‰å…ƒç»„æ„å»º

**æ•°å­¦å®ç°**:
- é“¾å¤å½¢æ¡ä»¶: âˆ‚_{p-1} âˆ˜ âˆ‚_p = âˆ…
- å…³è”çŸ©é˜µ: B_p[i,j] = è¾¹ç•Œå…³ç³»

---

### 2. HodgeLaplacian (è°±åˆ†æ)

**èŒè´£**: è®¡ç®—æ‹“æ‰‘å’Œè°±ç‰¹å¾

**å…³é”®æ–¹æ³•**:
- `compute_laplacian(p)` - è®¡ç®—L_p = d_{p-1}Î´_{p-1} + Î´_p d_p
- `compute_spectrum(p, k)` - è°±åˆ†è§£
- `compute_betti_numbers()` - è®¡ç®—æ‹“æ‰‘ä¸å˜é‡
- `hodge_decomposition(p, signal)` - Hodgeåˆ†è§£

**æ•°å­¦å®ç°**:
- å¤–å¾®åˆ†: d_p = B_{p+1}^T
- ä½™å¾®åˆ†: Î´_p = B_p
- Bettiæ•°: Î²_p = dim(ker L_p)

---

### 3. GraphBrainEngine (å›¾è„‘)

**èŒè´£**: åŠ¨æ€è®¤çŸ¥æ¼”åŒ–æ¨¡æ‹Ÿ

**å…³é”®æ–¹æ³•**:
- `evolve_step(dt, drive)` - æ—¶é—´æ­¥æ¼”åŒ–
- `activate_cells(dim, indices, strength)` - æ¿€æ´»èŠ‚ç‚¹
- `get_activated_cells(dim, top_k)` - è·å–æœ€æ¿€æ´»çš„
- `_compute_free_energy(P, W)` - è®¡ç®—F = U - TÂ·S
- `_trigger_phase_transition()` - è§¦å‘CPHL

**æ•°å­¦å®ç°**:
- è‡ªç”±èƒ½: F = Î£w_eÂ·Î¦(e,P) - TÂ·(-Î£w_e log w_e)
- æ¼”åŒ–: dP/dt = -âˆ‡F + æ‰©æ•£ + é©±åŠ¨
- Hebbå­¦ä¹ : dW/dt = Î·Â·P_iÂ·P_j

---

### 4. GraphRAGManager (ç»Ÿä¸€æ¥å£)

**èŒè´£**: çŸ¥è¯†å›¾è°±ç®¡ç†å’ŒæŸ¥è¯¢

**å…³é”®æ–¹æ³•**:
- `add_triple(s, p, o)` - æ·»åŠ çŸ¥è¯†ä¸‰å…ƒç»„
- `build_indices()` - æ„å»ºæ‰€æœ‰ç´¢å¼•
- `query(text, mode, top_k)` - å¤šæ¨¡å¼æŸ¥è¯¢
- `get_statistics()` - è·å–ç»Ÿè®¡ä¿¡æ¯
- `save(dir)` / `load(dir)` - æŒä¹…åŒ–

**æŸ¥è¯¢æ¨¡å¼**:
- `spectral`: è°±æ¨ç† (Laplacianå¼•å¯¼)
- `brain`: å›¾è„‘åŠ¨åŠ›å­¦ (æ¿€æ´»ä¼ æ’­)
- `hybrid`: æ··åˆæ¨¡å¼ (åŠ æƒç»„åˆ)

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒä¾èµ–

```python
numpy>=1.20.0        # æ•°å€¼è®¡ç®—
scipy>=1.7.0         # ç¨€ç–çŸ©é˜µã€ç‰¹å¾å€¼æ±‚è§£
```

### å¯é€‰ä¾èµ–

```python
matplotlib>=3.3.0    # å¯è§†åŒ– (æœªæ¥)
networkx>=2.6        # å›¾ç®—æ³• (å‚è€ƒ)
torch>=1.10.0        # GPUåŠ é€Ÿ (æœªæ¥)
```

---

## ğŸ“š ä½¿ç”¨æµç¨‹

### åŸºç¡€æµç¨‹

```python
from apt_graph_rag import GraphRAGManager

# 1. åˆ›å»º
rag = GraphRAGManager(max_dimension=2)

# 2. æ·»åŠ çŸ¥è¯†
rag.add_triple("å®ä½“1", "å…³ç³»", "å®ä½“2")

# 3. æ„å»ºç´¢å¼•
rag.build_indices()

# 4. æŸ¥è¯¢
results = rag.query("æŸ¥è¯¢æ–‡æœ¬")
```

### é«˜çº§æµç¨‹

```python
# ç›´æ¥æ“ä½œæ³›å›¾
gg = rag.gg
cell = gg.get_cell(0, "entity:å®ä½“1")

# ç›´æ¥æ“ä½œè°±
hodge = rag.hodge
eigenvalues, _ = hodge.compute_spectrum(0)

# ç›´æ¥æ“ä½œå›¾è„‘
brain = rag.brain
brain.activate_cells(0, [0, 1], strength=2.0)
brain.evolve_step(dt=0.1)
```

---

## ğŸ”¬ æµ‹è¯•ä¸éªŒè¯

### å•å…ƒæµ‹è¯•

```bash
# æµ‹è¯•å„æ¨¡å—
python generalized_graph.py
python hodge_laplacian.py
python graph_brain.py
python graph_rag_manager.py
```

### é›†æˆæµ‹è¯•

```bash
# å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
python __init__.py

# å®Œæ•´æ¼”ç¤º
python demo_full.py
```

### æ€§èƒ½åŸºå‡†

| è§„æ¨¡ | å®ä½“æ•° | å…³ç³»æ•° | æ„å»ºæ—¶é—´ | æŸ¥è¯¢æ—¶é—´ |
|------|--------|--------|----------|----------|
| å° | ~100 | ~200 | <1s | <0.1s |
| ä¸­ | ~1K | ~2K | ~5s | <0.5s |
| å¤§ | ~10K | ~20K | ~30s | ~1s |
| è¶…å¤§ | ~100K | ~200K | ~5min | ~5s |

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### åˆå­¦è€…

1. é˜…è¯» `README.md` - äº†è§£åŸºæœ¬æ¦‚å¿µ
2. è¿è¡Œ `demo_full.py` - çœ‹å®Œæ•´ç¤ºä¾‹
3. é˜…è¯» `INTEGRATION.md` - å­¦ä¹ é›†æˆ

### è¿›é˜¶

1. é˜…è¯» `generalized_graph.py` - ç†è§£æ•°æ®ç»“æ„
2. é˜…è¯» `hodge_laplacian.py` - ç†è§£è°±ç†è®º
3. é˜…è¯» `graph_brain.py` - ç†è§£åŠ¨åŠ›å­¦

### ä¸“å®¶

1. ç ”ç©¶æ•°å­¦æ¨å¯¼ - æ³›å›¾åˆ†æè®ºæ–‡
2. ä¼˜åŒ–æ€§èƒ½ - GPUåŠ é€Ÿã€ç¨€ç–ä¼˜åŒ–
3. æ‰©å±•åŠŸèƒ½ - æ–°ç®—æ³•ã€æ–°åº”ç”¨

---

## ğŸŒŸ æ ¸å¿ƒåˆ›æ–°ç‚¹

1. **æ³›å›¾ç»Ÿä¸€æ¡†æ¶**
   - æ”¯æŒä»»æ„på…ƒå…³ç³»
   - é“¾å¤å½¢ä¿è¯æ‹“æ‰‘ä¸€è‡´æ€§
   - å¯æ‰©å±•åˆ°é«˜ç»´ç»“æ„

2. **Hodge-Laplacianè°±ç†è®º**
   - Bettiæ•°æ£€æµ‹æ‹“æ‰‘å­”æ´
   - è°±é—´éš™è¡¡é‡ç¨³å®šæ€§
   - Hodgeåˆ†è§£æ­ç¤ºå†…åœ¨ç»“æ„

3. **å›¾è„‘åŠ¨åŠ›å­¦**
   - è‡ªç”±èƒ½é©±åŠ¨æ¼”åŒ–
   - è‡ªåŠ¨ç›¸å˜é‡ç»„ (CPHL)
   - Hebbå­¦ä¹ è‡ªç»„ç»‡

4. **ç»Ÿä¸€æŸ¥è¯¢æ¡†æ¶**
   - è°±æ¨ç† (å…¨å±€æ‹“æ‰‘)
   - æ¿€æ´»ä¼ æ’­ (å±€éƒ¨åŠ¨åŠ›å­¦)
   - æ··åˆæ¨¡å¼ (æœ€ä¼˜ç»„åˆ)

---

## ğŸ“– ç›¸å…³èµ„æº

### é¡¹ç›®æ–‡æ¡£
- [README.md](README.md) - é¡¹ç›®ä¸»æ–‡æ¡£
- [INTEGRATION.md](INTEGRATION.md) - APTé›†æˆæŒ‡å—
- æºç æ³¨é‡Š - è¯¦ç»†å®ç°è¯´æ˜

### ç†è®ºåŸºç¡€
- æ³›å›¾åˆ†æ (GGA) è®ºæ–‡
- Hodge-Laplacianè°±ç†è®º
- éå¹³è¡¡æ€ç»Ÿè®¡ç‰©ç†

### å¼€å‘èµ„æº
- NumPyæ–‡æ¡£
- SciPyç¨€ç–çŸ©é˜µ
- NetworkXå‚è€ƒ

---

**ç‰ˆæœ¬**: v0.1.0  
**ä½œè€…**: chen0430tw  
**æ—¥æœŸ**: 2024-12  
**è®¸å¯**: MIT  
