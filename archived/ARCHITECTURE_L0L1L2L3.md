# APT-Transformer æ¶æ„åˆ†å±‚è®¾è®¡

## ğŸ“ æ¶æ„æ€»è§ˆ

APT-Transformer é‡‡ç”¨ **å››å±‚åˆ†ç¦»æ¶æ„ï¼ˆL0/L1/L2/L3ï¼‰**ï¼Œå°†æ ¸å¿ƒå†…æ ¸ã€æ€§èƒ½ä¼˜åŒ–ã€è®°å¿†ç³»ç»Ÿã€åº”ç”¨äº¤ä»˜ç‰©ç†éš”ç¦»ï¼Œç¡®ä¿ï¼š

- **æ¸…æ™°çš„ä¾èµ–è¾¹ç•Œ**ï¼šé˜²æ­¢"ä¿®æ”¹ä¸€å¤„ç‰µä¸€ç‰‡"çš„è€¦åˆ
- **å¯æµ‹è¯•æ€§**ï¼šæ¯å±‚ç‹¬ç«‹æµ‹è¯•ï¼Œæ¥å£å¥‘çº¦éªŒè¯
- **å¯ç»´æŠ¤æ€§**ï¼šæ ¸å¿ƒå±‚ä¿æŒæœ€å°ç¨³å®šï¼Œæ‰©å±•å±‚è‡ªç”±æ¼”è¿›

---

## ğŸ—ï¸ å››å±‚æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    L3 åº”ç”¨äº¤ä»˜å±‚ (Product)                     â”‚
â”‚  WebUI â”‚ REST API â”‚ CLI â”‚ Agent â”‚ Plugins â”‚ å¯è§†åŒ– â”‚ ç›‘æ§    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  å¯ä¾èµ–: L0, L1, L2                                            â”‚
â”‚  ç¦æ­¢è¢«ä¾èµ–: L0/L1/L2 ä¸å¾— import L3                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              L2 è®°å¿†ä¸é•¿ä¸Šä¸‹æ–‡å±‚ (Memory)                      â”‚
â”‚  AIM-Memory â”‚ AIM-NC â”‚ GraphRAG â”‚ KG â”‚ é”šç‚¹ä¸»æƒ â”‚ è¯æ®å›çŒ   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  å¯ä¾èµ–: L0                                                    â”‚
â”‚  æ¥å£: é€šè¿‡ç»Ÿä¸€æ¥å£å‘ L0 æ³¨å…¥ä¸Šä¸‹æ–‡ï¼ˆä¸æ’é’©å­ï¼‰                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   L1 æ€§èƒ½å±‚ (Performance)                      â”‚
â”‚  è™šæ‹ŸBlackwell â”‚ é‡åŒ– â”‚ Flash/Triton â”‚ DDP â”‚ MoE â”‚ æ··åˆç²¾åº¦  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  å¯ä¾èµ–: L0                                                    â”‚
â”‚  è§„åˆ™: åªèƒ½æ˜¯"åŠ é€Ÿå™¨"ï¼Œä¸èƒ½æˆä¸ºé€»è¾‘ä¾èµ–                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   L0 å†…æ ¸å±‚ (Kernel)                           â”‚
â”‚  APT æ ¸å¿ƒç®—å­ â”‚ DBC-DAC â”‚ Left-Spin â”‚ æ¨ç†ä¸»å¹² â”‚ æœ€å°è®­ç»ƒ   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  å¯ä¾èµ–: æ— ï¼ˆæœ€å°ä¾èµ–ï¼‰                                        â”‚
â”‚  æš´éœ²: ç¨³å®š API (forward, generate, train_step)               â”‚
â”‚  åŸåˆ™: æ°¸è¿œæœ€å°ï¼Œæ°¸è¿œæœ€ç¨³å®š                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ L0 å†…æ ¸å±‚ (Kernel) - apt_core/

### æ ¸å¿ƒèŒè´£
APT çš„æœ¬ä½“æ”¹é€ ä¸æœ€å°è®­ç»ƒ/æ¨ç†é—­ç¯

### åŒ…å«æ¨¡å—

#### æ ¸å¿ƒå»ºæ¨¡ (Modeling)
```
apt_core/
â”œâ”€â”€ modeling/
â”‚   â”œâ”€â”€ apt_model.py           # APT æ ¸å¿ƒæ¨¡å‹ï¼ˆAutopoietic Transformï¼‰
â”‚   â”œâ”€â”€ dbc_dac.py             # DBC-DAC ä¼˜åŒ–ç®—å­
â”‚   â”œâ”€â”€ left_spin_smooth.py   # Left-Spin Smooth æœºåˆ¶
â”‚   â”œâ”€â”€ blocks/                # æ ¸å¿ƒç»„ä»¶ï¼ˆæ³¨æ„åŠ›ã€FFNã€è·¯ç”±ï¼‰
â”‚   â””â”€â”€ embeddings.py          # åŸºç¡€åµŒå…¥å±‚
```

#### æ ¸å¿ƒæ¨ç† (Generation)
```
apt_core/
â”œâ”€â”€ generation/
â”‚   â”œâ”€â”€ generator.py           # åŸºç¡€ç”Ÿæˆå™¨
â”‚   â””â”€â”€ evaluator.py           # åŸºç¡€è¯„ä¼°å™¨
â”œâ”€â”€ runtime/
â”‚   â””â”€â”€ decoder/               # æ¨ç†ä¸»å¹²ï¼ˆrouting, haltingï¼‰
```

#### æ ¸å¿ƒè®­ç»ƒ (Training)
```
apt_core/
â”œâ”€â”€ training/
â”‚   â”œâ”€â”€ trainer_base.py        # æœ€å°è®­ç»ƒå¾ªç¯
â”‚   â”œâ”€â”€ optimizer.py           # åŸºç¡€ä¼˜åŒ–å™¨
â”‚   â””â”€â”€ data_loading.py        # æ•°æ®åŠ è½½
```

#### é…ç½®ç³»ç»Ÿ
```
apt_core/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ apt_config.py          # æ ¸å¿ƒé…ç½®
â”‚   â””â”€â”€ base.py                # é…ç½®åŸºç±»
```

### ä¾èµ–è§„åˆ™
- âœ… **å¯ä¾èµ–**: PyTorch, NumPy ç­‰åŸºç¡€åº“
- âŒ **ç¦æ­¢ä¾èµ–**: L1/L2/L3 çš„ä»»ä½•æ¨¡å—
- âŒ **ç¦æ­¢ä¾èµ–**: WebUI, API, Plugins, Visualization

### æš´éœ²æ¥å£
```python
# ç¨³å®š API
model.forward(input_ids, **kwargs) -> output
model.generate(prompt, max_length=100) -> str
trainer.train_step(batch) -> loss
```

---

## âš¡ L1 æ€§èƒ½å±‚ (Performance) - apt_perf/

### æ ¸å¿ƒèŒè´£
å¯æ’æ‹”çš„æ€§èƒ½åŠ é€Ÿå™¨ï¼ˆä¸å½±å“è¯­ä¹‰æ­£ç¡®æ€§ï¼‰

### åŒ…å«æ¨¡å—

#### è™šæ‹Ÿ Blackwell ä¼˜åŒ–
```
apt_perf/
â”œâ”€â”€ optimization/
â”‚   â”œâ”€â”€ virtual_blackwell_adapter.py   # ä¸‰å±‚è™šæ‹ŸåŒ–æ•´åˆ
â”‚   â”œâ”€â”€ vgpu_stack.py                  # å¤šçº§GPUå †å 
â”‚   â”œâ”€â”€ vgpu_estimator.py              # èµ„æºè¯„ä¼°
â”‚   â”œâ”€â”€ microvm_compression.py         # MicroVM å‹ç¼©
â”‚   â”œâ”€â”€ mxfp4_quantization.py          # MXFP4 é‡åŒ–
â”‚   â”œâ”€â”€ moe_optimized.py               # MoE ä¼˜åŒ–
â”‚   â””â”€â”€ extreme_scale_training.py      # 100K GPU è®­ç»ƒ
```

#### è®­ç»ƒæ€§èƒ½ä¼˜åŒ–
```
apt_perf/
â”œâ”€â”€ training/
â”‚   â”œâ”€â”€ mixed_precision.py             # æ··åˆç²¾åº¦
â”‚   â”œâ”€â”€ checkpoint.py                  # Checkpoint åŸå­æ€§
â”‚   â”œâ”€â”€ distributed.py                 # åˆ†å¸ƒå¼è®­ç»ƒ (DDP, FSDP)
â”‚   â””â”€â”€ gradient_accumulation.py       # æ¢¯åº¦ç´¯ç§¯
```

#### é‡åŒ–ä¸å‹ç¼©
```
apt_perf/
â”œâ”€â”€ compression/
â”‚   â”œâ”€â”€ quantization.py                # INT8/INT4/FP4 é‡åŒ–
â”‚   â”œâ”€â”€ pruning.py                     # å‰ªæ
â”‚   â””â”€â”€ distillation.py                # çŸ¥è¯†è’¸é¦
```

### ä¾èµ–è§„åˆ™
- âœ… **å¯ä¾èµ–**: L0 (åªè¯»æ¥å£)
- âŒ **ç¦æ­¢**: ä¿®æ”¹ L0 æ ¸å¿ƒè¯­ä¹‰
- âŒ **ç¦æ­¢**: æˆä¸º L0 çš„é€»è¾‘ä¾èµ–ï¼ˆæ€§èƒ½æ˜¯å¯æ›¿æ¢çš„å®ç°ç»†èŠ‚ï¼‰

### ä½¿ç”¨æ–¹å¼
```python
# æ€§èƒ½ä¼˜åŒ–æ˜¯å¯é€‰çš„
from apt_perf import enable_virtual_blackwell, enable_mixed_precision

# ä¸€è¡Œå¯ç”¨
enable_virtual_blackwell(mode='balanced')
enable_mixed_precision(dtype='fp16')

# æ ¸å¿ƒè®­ç»ƒé€»è¾‘ä¸å˜
trainer.train(model, dataset)
```

---

## ğŸ§  L2 è®°å¿†ä¸é•¿ä¸Šä¸‹æ–‡å±‚ (Memory) - apt_memory/

### æ ¸å¿ƒèŒè´£
ç‹¬ç«‹çš„è®°å¿†ç³»ç»Ÿç‹å›½ï¼ˆé”šç‚¹ä¸»æƒã€è¯æ®å›çŒã€é•¿ä¸Šä¸‹æ–‡ï¼‰

### åŒ…å«æ¨¡å—

#### AIM è®°å¿†ç³»ç»Ÿ
```
apt_memory/
â”œâ”€â”€ aim/
â”‚   â”œâ”€â”€ aim_memory.py          # æƒ¯æ€§è·¯ç”±ã€æ—¶é—´é•œåƒã€é”šç‚¹çº é”™
â”‚   â”œâ”€â”€ aim_nc.py              # n-gram/trie æ”¶ç¼–å¬å› + é”šç‚¹è£å†³
â”‚   â”œâ”€â”€ anchor_fields.py       # é”šç‚¹ä¸»æƒå­—æ®µå®šä¹‰
â”‚   â”œâ”€â”€ evidence_feedback.py   # è¯æ®å›çŒï¼ˆstrict æ¨¡å¼ï¼‰
â”‚   â””â”€â”€ tiered_memory.py       # åˆ†å±‚è®°å¿† A/B/C æ¡£
```

#### çŸ¥è¯†å›¾è°±ä¸ RAG
```
apt_memory/
â”œâ”€â”€ graph_rag/
â”‚   â”œâ”€â”€ graph_brain.py         # Graph Brain åŠ¨æ€å»ºæ¨¡
â”‚   â”œâ”€â”€ graph_rag_manager.py   # RAG ç®¡ç†å™¨
â”‚   â”œâ”€â”€ hodge_laplacian.py     # å…‰è°±åˆ†æ
â”‚   â””â”€â”€ kg_integration.py      # çŸ¥è¯†å›¾è°±é›†æˆ
```

#### é•¿ä¸Šä¸‹æ–‡æœºåˆ¶
```
apt_memory/
â”œâ”€â”€ long_context/
â”‚   â”œâ”€â”€ rope_variants.py       # RoPE/iRoPE/YaRN/LongRoPE2
â”‚   â”œâ”€â”€ context_compression.py # ä¸Šä¸‹æ–‡å‹ç¼©
â”‚   â””â”€â”€ retrieval.py           # æ£€ç´¢å¢å¼º
```

### ä¾èµ–è§„åˆ™
- âœ… **å¯ä¾èµ–**: L0 (æ ¸å¿ƒæ¥å£)
- âŒ **ç¦æ­¢**: åˆ°å¤„æ’é’©å­
- âœ… **å¿…é¡»**: é€šè¿‡ç»Ÿä¸€æ¥å£å‘ L0 æä¾›"å¯æ³¨å…¥ä¸Šä¸‹æ–‡"

### å…³é”®å‡†åˆ™ï¼šé”šç‚¹ä¸»æƒ
```python
# ä»»ä½•å¬å›/å‹ç¼©/æ‘˜è¦æ¨¡å—éƒ½ä¸èƒ½ç»•è¿‡é”šç‚¹å­—æ®µè£å†³
class AnchorFields:
    """å…¨å±€å‡†åˆ™ï¼šé”šç‚¹ä¸»æƒ"""

    @staticmethod
    def validate(memory_item):
        """æ‰€æœ‰è®°å¿†æ“ä½œå¿…é¡»é€šè¿‡æ­¤éªŒè¯"""
        required = ['timestamp', 'anchor_id', 'hash', 'fields']
        assert all(k in memory_item for k in required)

    @staticmethod
    def strict_mode_feedback(evidence):
        """ä¸¥æ ¼æ¨¡å¼æ‰å›çŒè¯æ®"""
        if config.strict_mode:
            return evidence  # å®Œæ•´è¯æ®å›çŒ
        else:
            return summary_with_fields(evidence)  # é»˜è®¤ï¼šæ‘˜è¦+fields
```

### ä½¿ç”¨æ–¹å¼
```python
from apt_memory import enable_memory_system

# å¯ç”¨è®°å¿†ç³»ç»Ÿ
memory = enable_memory_system(
    mode='aim-nc',           # AIM-NC æ¨¡å¼
    strict=False,            # é»˜è®¤è½»é‡ï¼ˆæ‘˜è¦+fieldsï¼‰
    anchor_sovereignty=True  # å¼ºåˆ¶é”šç‚¹ä¸»æƒ
)

# ç»Ÿä¸€æ¥å£æ³¨å…¥ä¸Šä¸‹æ–‡
context = memory.get_context(query, max_tokens=2048)
output = model.forward(input_ids, context=context)
```

---

## ğŸš€ L3 åº”ç”¨äº¤ä»˜å±‚ (Product) - apps/

### æ ¸å¿ƒèŒè´£
ç”¨æˆ·ç•Œé¢ã€APIã€ç›‘æ§ã€å¯è§†åŒ–ã€æ’ä»¶ç”Ÿæ€

### åŒ…å«æ¨¡å—

#### Web UI (Gradio)
```
apps/
â”œâ”€â”€ webui/
â”‚   â”œâ”€â”€ app.py                 # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ tabs/
â”‚   â”‚   â”œâ”€â”€ training_monitor.py    # Tab 1: è®­ç»ƒç›‘æ§
â”‚   â”‚   â”œâ”€â”€ gradient_monitor.py    # Tab 2: æ¢¯åº¦ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ checkpoint_manager.py  # Tab 3: Checkpoint ç®¡ç†
â”‚   â”‚   â””â”€â”€ inference_tester.py    # Tab 4: æ¨ç†æµ‹è¯•
â”‚   â””â”€â”€ websocket_push.py      # å®æ—¶æ¨é€
```

#### REST API (FastAPI)
```
apps/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ server.py              # API æœåŠ¡å™¨
â”‚   â”œâ”€â”€ endpoints/
â”‚   â”‚   â”œâ”€â”€ train.py           # è®­ç»ƒç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ inference.py       # æ¨ç†ç«¯ç‚¹
â”‚   â”‚   â””â”€â”€ monitoring.py      # ç›‘æ§ç«¯ç‚¹
â”‚   â””â”€â”€ auth.py                # è®¤è¯
```

#### CLI å·¥å…·
```
apps/
â”œâ”€â”€ cli/
â”‚   â”œâ”€â”€ commands.py            # å‘½ä»¤å®ç°
â”‚   â”œâ”€â”€ parser.py              # å‚æ•°è§£æ
â”‚   â””â”€â”€ interactive/
â”‚       â”œâ”€â”€ chat.py            # äº¤äº’å¼å¯¹è¯
â”‚       â””â”€â”€ admin_mode.py      # Admin æ¨¡å¼
```

#### å¯è§‚æµ‹æ€§ç³»ç»Ÿï¼ˆä¸‰ä»¶å¥—ï¼‰
```
apps/
â”œâ”€â”€ observability/
â”‚   â”œâ”€â”€ collectors/            # æ•°æ®é‡‡é›†
â”‚   â”‚   â”œâ”€â”€ training_monitor.py
â”‚   â”‚   â”œâ”€â”€ gradient_monitor.py
â”‚   â”‚   â””â”€â”€ resource_monitor.py
â”‚   â”œâ”€â”€ visualization/         # ç»˜å›¾ä¸æŠ¥å‘Š
â”‚   â”‚   â”œâ”€â”€ plot_training.py
â”‚   â”‚   â”œâ”€â”€ plot_gradients.py
â”‚   â”‚   â””â”€â”€ generate_report.py
â”‚   â””â”€â”€ dashboards/            # å±•ç¤ºé¢
â”‚       â””â”€â”€ webui_integration.py
```

#### æ’ä»¶ç”Ÿæ€
```
apps/
â”œâ”€â”€ plugins/
â”‚   â”œâ”€â”€ compression_plugin.py
â”‚   â”œâ”€â”€ visual_distillation_plugin.py
â”‚   â”œâ”€â”€ web_search_plugin.py
â”‚   â”œâ”€â”€ teacher_api.py
â”‚   â””â”€â”€ plugin_system/
â”‚       â”œâ”€â”€ loader.py
â”‚       â”œâ”€â”€ registry.py
â”‚       â””â”€â”€ hooks.py
```

#### Agent ç³»ç»Ÿ
```
apps/
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ agent_loop.py
â”‚   â”œâ”€â”€ tool_system.py
â”‚   â””â”€â”€ python_sandbox.py
```

### ä¾èµ–è§„åˆ™
- âœ… **å¯ä¾èµ–**: L0, L1, L2 çš„å…¬å…±æ¥å£
- âŒ **ç¦æ­¢è¢«ä¾èµ–**: L0/L1/L2 æ°¸è¿œä¸èƒ½åå‘ import L3
- âœ… **å…³é”®åŸåˆ™**: é‡‡é›†æ¨¡å—åªäº§å‡ºç»“æ„åŒ–äº‹ä»¶æµï¼ˆJSON/metricsï¼‰ï¼Œç»˜å›¾ä¸ UI åªæ¶ˆè´¹äº‹ä»¶æµï¼Œä¸åå‘å½±å“è®­ç»ƒè¯­ä¹‰

### å¯è§‚æµ‹æ€§æ¥å£
```python
# L0/L1 è®­ç»ƒå™¨åªéœ€å‘é€äº‹ä»¶
trainer.emit_event({
    'type': 'training_step',
    'epoch': 1,
    'step': 100,
    'loss': 0.234,
    'timestamp': time.time()
})

# L3 ç›‘æ§ç³»ç»Ÿæ¶ˆè´¹äº‹ä»¶ï¼ˆä¸å½±å“è®­ç»ƒï¼‰
monitor.subscribe('training_step', callback=plot_loss_curve)
```

---

## ğŸ”¬ ç ”ç©¶åŒº (Experiments) - experiments/

### æ ¸å¿ƒèŒè´£
è®ºæ–‡çº§å°è¯•ã€å¯¹æ ‡å®éªŒã€ä¸€æ¬¡æ€§è„šæœ¬

### åŒ…å«å†…å®¹
```
experiments/
â”œâ”€â”€ papers/                    # è®ºæ–‡å¤ç°
â”‚   â”œâ”€â”€ transformer_xl/
â”‚   â”œâ”€â”€ llama/
â”‚   â””â”€â”€ deepseek/
â”œâ”€â”€ benchmarks/                # å¯¹æ ‡å®éªŒ
â”‚   â”œâ”€â”€ glue/
â”‚   â”œâ”€â”€ mmlu/
â”‚   â””â”€â”€ humaneval/
â”œâ”€â”€ prototypes/                # åŸå‹éªŒè¯
â”‚   â”œâ”€â”€ new_attention.py
â”‚   â””â”€â”€ experimental_optimizer.py
â””â”€â”€ hpo/                       # è¶…å‚æ•°ä¼˜åŒ–
    â”œâ”€â”€ apt_optuna.py
    â””â”€â”€ configs/
```

### ä¾èµ–è§„åˆ™
- âœ… **å¯ä¾èµ–**: L0, L1, L2, L3 çš„å…¬å…± API
- âŒ **ç¦æ­¢**: åº“ä»£ç ä¸åº” import experiments/

---

## ğŸ› ï¸ å·¥å…·åŒº (Tools) - tools/

### æ ¸å¿ƒèŒè´£
çº¯å·¥å…·è„šæœ¬ï¼ˆåªè°ƒç”¨å…¬å…± APIï¼‰

### åŒ…å«å†…å®¹
```
tools/
â”œâ”€â”€ data_processing/
â”‚   â”œâ”€â”€ generate_hlbd_v2.py
â”‚   â””â”€â”€ preprocess_dataset.py
â”œâ”€â”€ model_conversion/
â”‚   â”œâ”€â”€ to_onnx.py
â”‚   â””â”€â”€ to_safetensors.py
â”œâ”€â”€ diagnostics/
â”‚   â”œâ”€â”€ diagnose_issues.py
â”‚   â””â”€â”€ hardware_check.py
â””â”€â”€ visualization/
    â”œâ”€â”€ visualize_training.py
    â””â”€â”€ demo_visualization.py
```

### ä¾èµ–è§„åˆ™
- âœ… **å¯ä¾èµ–**: L0, L1, L2, L3 çš„å…¬å…± API
- âŒ **ç¦æ­¢**: åº“ä»£ç ä¸åº” import tools/

---

## ğŸ“Š äº§ç‰©åŒº (Artifacts) - artifacts/

### æ ¸å¿ƒèŒè´£
å›¾è¡¨äº§ç‰©ã€æŠ¥å‘Šã€å¯¼å‡ºæ–‡ä»¶

### åŒ…å«å†…å®¹
```
artifacts/
â”œâ”€â”€ reports/                   # è®­ç»ƒæŠ¥å‘Š
â”‚   â”œâ”€â”€ model_report_*.md
â”‚   â””â”€â”€ visualization_report.md
â”œâ”€â”€ plots/                     # å›¾è¡¨
â”‚   â”œâ”€â”€ training_curve.png
â”‚   â”œâ”€â”€ gradient_flow.png
â”‚   â””â”€â”€ attention_heatmap.png
â”œâ”€â”€ checkpoints/               # Checkpoint å¤‡ä»½
â””â”€â”€ exports/                   # æ¨¡å‹å¯¼å‡º
    â”œâ”€â”€ onnx/
    â””â”€â”€ safetensors/
```

---

## ğŸ“œ ç«‹æ³•æ¡æ¬¾ï¼ˆç¡¬è§„åˆ™ï¼‰

å¿…é¡»å†™è¿› `repo_schema` æˆ–è´¡çŒ®æŒ‡å—çš„ç¡¬è§„åˆ™ï¼š

### 1. ç¦æ­¢åå‘ä¾èµ–
```
L0, L1, L2 ä¸å¾— import apps/, experiments/, tools/
è¿è§„ç¤ºä¾‹: apt_core/modeling/apt_model.py imports apps/webui/app.py âŒ
```

### 2. ç»Ÿä¸€å…¥å£
```python
# æ‰€æœ‰å¢å¼ºåªèƒ½é€šè¿‡ profile/enable() æ¥å£å¯ç”¨
from apt import enable

enable('perf')   # å¯ç”¨æ€§èƒ½å±‚
enable('memory') # å¯ç”¨è®°å¿†å±‚
enable('max')    # å…¨å®¶æ¡¶
```

### 3. é”šç‚¹ä¸»æƒ
```python
# ä»»ä½•å‹ç¼©/å¬å›/æ‘˜è¦æ¨¡å—ä¸å¾—ç»•è¿‡ AnchorFields æ ¡éªŒ
class MemoryModule:
    def process(self, item):
        AnchorFields.validate(item)  # å¿…é¡»
        # ... å¤„ç†é€»è¾‘
```

### 4. strict æ‰å›çŒè¯æ®
```python
# é»˜è®¤è½»é‡ï¼ˆæ‘˜è¦+fieldsï¼‰ï¼Œå¿…è¦æ—¶å¯æ ¸å¯¹
if config.strict_mode:
    return full_evidence
else:
    return summary_with_fields
```

### 5. å¯è§‚æµ‹æ€§åªè¯»è®­ç»ƒ
```python
# ç›‘æ§/ç»˜å›¾/UI ä¸åå‘å¹²é¢„è®­ç»ƒè¯­ä¹‰ï¼ˆé™¤éæ˜¾å¼æ§åˆ¶æ¥å£ï¼‰
monitor.subscribe('event', callback)  # âœ… åªè¯»
trainer.set_learning_rate(0.001)      # âŒ é™¤éæ˜¾å¼æ¥å£
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å±‚çº§å†’çƒŸæµ‹è¯•
```bash
# L0: è®­ç»ƒ/æ¨ç†æœ€å°é—­ç¯
pytest tests/l0_kernel/ -v

# L1: åŠ é€Ÿå™¨ç‹¬ç«‹æµ‹è¯•ï¼ˆä¸å½±å“è¯­ä¹‰ï¼‰
pytest tests/l1_performance/ -v

# L2: è®°å¿†ç³»ç»Ÿå¥‘çº¦æµ‹è¯•
pytest tests/l2_memory/ --contract

# L3: WebUI/API å†’çƒŸ
pytest tests/l3_product/ --smoke
```

### å¥‘çº¦æµ‹è¯•
```python
# è·¨å±‚åªæµ‹"æ¥å£å¥‘çº¦"ï¼Œé¿å…ä¸€æ”¹å°±å…¨ç‚¸
def test_l2_provides_context():
    """L2 å¿…é¡»æä¾›ç¬¦åˆè§„èŒƒçš„ä¸Šä¸‹æ–‡"""
    context = memory.get_context(query)
    assert 'tokens' in context
    assert 'metadata' in context
    assert len(context['tokens']) <= max_tokens
```

---

## ğŸ¯ è¿ç§»è·¯å¾„ï¼ˆä¸ç ´åç°æœ‰åŠŸèƒ½ï¼‰

å½“å‰ `apt_model/` çš„æ¨¡å—å°†é€æ­¥è¿ç§»åˆ°æ–°æ¶æ„ï¼š

### é˜¶æ®µ 1: åˆ›å»ºæ–°å±‚çº§ç›®å½•ï¼ˆä¸ç§»åŠ¨æ–‡ä»¶ï¼‰
```bash
mkdir -p apt_core apt_perf apt_memory apps
```

### é˜¶æ®µ 2: ç¬¦å·é“¾æ¥è¿‡æ¸¡
```bash
# ä¿æŒ apt_model/ å¯ç”¨ï¼Œåˆ›å»ºæŒ‡å‘æ–°ä½ç½®çš„ç¬¦å·é“¾æ¥
ln -s ../apt_core/modeling apt_model/modeling_core
```

### é˜¶æ®µ 3: é€æ­¥è¿ç§»ï¼ˆåˆ†æ‰¹è¿›è¡Œï¼‰
1. Week 1: L0 æ ¸å¿ƒæ¨¡å— + æµ‹è¯•
2. Week 2: L1 æ€§èƒ½æ¨¡å— + æµ‹è¯•
3. Week 3: L2 è®°å¿†æ¨¡å— + æµ‹è¯•
4. Week 4: L3 åº”ç”¨æ¨¡å— + æµ‹è¯•

### é˜¶æ®µ 4: åºŸå¼ƒæ—§è·¯å¾„
```python
# apt_model/modeling/apt_model.py
import warnings
warnings.warn(
    "apt_model.modeling is deprecated, use apt_core.modeling",
    DeprecationWarning
)
from apt_core.modeling import *
```

---

## ğŸ“ˆ æ¶æ„æ”¶ç›Š

é‡‡ç”¨æ­¤åˆ†å±‚æ¶æ„åï¼ŒAPT-Transformer å°†å®ç°ï¼š

| æŒ‡æ ‡ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| **æ ¸å¿ƒç¨³å®šæ€§** | ä¿®æ”¹ä¸€å¤„ç‰µä¸€ç‰‡ | L0 ç‹¬ç«‹æµ‹è¯• | 10Ã— |
| **å¼€å‘æ•ˆç‡** | ä¸çŸ¥é“æ”¹å“ªé‡Œ | æ¸…æ™°åˆ†å±‚ | 5Ã— |
| **æµ‹è¯•é€Ÿåº¦** | å…¨é‡æµ‹è¯• 30min | å±‚çº§æµ‹è¯• 5min | 6Ã— |
| **æ–°äººä¸Šæ‰‹** | è¿·å¤±åœ¨å…¨å®¶æ¡¶ | ä» L0 core å¼€å§‹ | 10Ã— |
| **å¯ç»´æŠ¤æ€§** | ä¾èµ–æ··ä¹± | å•å‘ä¾èµ– | 8Ã— |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [DISTRIBUTION_MODES.md](./DISTRIBUTION_MODES.md) - ä¸‰æ¡£å‘è¡Œç‰ˆé…ç½®
- [RESTRUCTURE_PLAN.md](./RESTRUCTURE_PLAN.md) - è¯¦ç»†è¿ç§»è®¡åˆ’
- [COMPLETE_TECH_SUMMARY.md](./docs/COMPLETE_TECH_SUMMARY.md) - æŒ‰å±‚çº§é‡æ’çš„æŠ€æœ¯æ€»è§ˆ

---

**ç‰ˆæœ¬**: 1.0
**ä½œè€…**: APT Team
**æ—¥æœŸ**: 2025-01-21
**çŠ¶æ€**: ğŸš§ æ¶æ„è®¾è®¡é˜¶æ®µ
