# APT åˆ†å±‚è®°å¿†ç³»ç»Ÿå®Œæ•´æŒ‡å—

**ç‰ˆæœ¬**: 2026-01-21
**åŸºäºæœ€ä½³å®è·µ**: "ç»†èŠ‚ä¸é æ‘˜è¦ä¿å­˜ï¼Œè€Œæ˜¯é æ£€ç´¢å–åŸæ–‡"

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡ç†å¿µ

ä¼ ç»Ÿè®°å¿†ç³»ç»Ÿçš„é—®é¢˜ï¼š**è¿‡åº¦ç²¾ç®€å¯¼è‡´ç»†èŠ‚ä¸¢å¤±**

åˆ†å±‚è®°å¿†ç³»ç»Ÿçš„è§£å†³æ–¹æ¡ˆï¼š
- âœ… **ç»†èŠ‚ä¸é æ‘˜è¦ä¿å­˜ï¼Œè€Œæ˜¯é æ£€ç´¢å–åŸæ–‡**
- âœ… **éª¨æ¶å¸¸é©»ï¼ˆ200-400 tokensï¼‰+ ç»†èŠ‚åŸæ–‡æŒ‰éœ€æ£€ç´¢**
- âœ… **ç‰ˆæœ¬åŒ–æ ¡éªŒï¼Œé˜²æ­¢å®šä¹‰æ¼‚ç§»**

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              APT åˆ†å±‚è®°å¿†ç³»ç»Ÿæ¶æ„                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ç”¨æˆ·è¾“å…¥ï¼ˆå¯å«é”šç‚¹æŒ‡ä»¤ï¼‰                                  â”‚
â”‚    â”‚                                                     â”‚
â”‚    â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   é”šç‚¹æŒ‡ä»¤è§£æå™¨                          â”‚            â”‚
â”‚  â”‚   è¯†åˆ«ï¼šã€å°å­˜Â·åŸæ–‡ã€‘ã€å°å­˜Â·å­—æ®µã€‘ã€å°å­˜Â·æ‘˜è¦ã€‘â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚    â”‚                                                     â”‚
â”‚    â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   ä¸‰æ¡£åˆ†å±‚å­˜å‚¨                            â”‚            â”‚
â”‚  â”‚                                          â”‚            â”‚
â”‚  â”‚   Aæ¡£ï¼ˆVerbatimï¼‰ï¼šåŸæ–‡ï¼Œç¦æ­¢æ‘˜è¦        â”‚            â”‚
â”‚  â”‚     â€¢ ä¸¥æ ¼å®šä¹‰                            â”‚            â”‚
â”‚  â”‚     â€¢ ç¬¦å·çº¦å®š                            â”‚            â”‚
â”‚  â”‚     â€¢ å®šç†æ¡ä»¶                            â”‚            â”‚
â”‚  â”‚     â€¢ å“ˆå¸Œæ ¡éªŒ                            â”‚            â”‚
â”‚  â”‚                                          â”‚            â”‚
â”‚  â”‚   Bæ¡£ï¼ˆStructuredï¼‰ï¼šç»“æ„åŒ–ï¼ŒJSON/é”®å€¼å¯¹  â”‚            â”‚
â”‚  â”‚     â€¢ å‚æ•°é…ç½®                            â”‚            â”‚
â”‚  â”‚     â€¢ é˜ˆå€¼è¡¨                              â”‚            â”‚
â”‚  â”‚     â€¢ æµç¨‹æ­¥éª¤                            â”‚            â”‚
â”‚  â”‚                                          â”‚            â”‚
â”‚  â”‚   Cæ¡£ï¼ˆNarrativeï¼‰ï¼šæ‘˜è¦ï¼Œå¯å‹ç¼©          â”‚            â”‚
â”‚  â”‚     â€¢ èƒŒæ™¯å™è¿°                            â”‚            â”‚
â”‚  â”‚     â€¢ è®¨è®ºè¿‡ç¨‹                            â”‚            â”‚
â”‚  â”‚     â€¢ ä¿ç•™å›æº¯é“¾æ¥                        â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Layer 1: éª¨æ¶å¡  â”‚    â”‚ Layer 2: ç»†èŠ‚ä»“   â”‚          â”‚
â”‚  â”‚ ï¼ˆéšæ—¶æ³¨å…¥ï¼‰     â”‚    â”‚ ï¼ˆæŒ‰éœ€æ£€ç´¢ï¼‰      â”‚          â”‚
â”‚  â”‚                  â”‚    â”‚                   â”‚          â”‚
â”‚  â”‚ â€¢ æœ¯è¯­è¡¨ç´¢å¼•     â”‚    â”‚ â€¢ Aæ¡£åŸæ–‡         â”‚          â”‚
â”‚  â”‚ â€¢ æ ¸å¿ƒé”šç‚¹       â”‚    â”‚ â€¢ Bæ¡£å­—æ®µ         â”‚          â”‚
â”‚  â”‚ â€¢ ç¦æ­¢åç¦»ç‚¹     â”‚    â”‚ â€¢ Cæ¡£æ‘˜è¦         â”‚          â”‚
â”‚  â”‚ â€¢ å½“å‰ç›®æ ‡       â”‚    â”‚ â€¢ ç‰ˆæœ¬æ§åˆ¶        â”‚          â”‚
â”‚  â”‚                  â”‚    â”‚ â€¢ Keyæ£€ç´¢         â”‚          â”‚
â”‚  â”‚ 200-400 tokens  â”‚    â”‚ è¯­ä¹‰æ£€ç´¢          â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                         â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                  â–¼                                       â”‚
â”‚          ä¸Šä¸‹æ–‡ç»„åˆï¼ˆè®°å¿†æ³¨å…¥ï¼‰                            â”‚
â”‚                  â–¼                                       â”‚
â”‚          é˜²æ¼‚ç§»éªŒè¯å™¨                                      â”‚
â”‚          â€¢ ç‰ˆæœ¬ä¸€è‡´æ€§                                      â”‚
â”‚          â€¢ ç¬¦å·ä¸€è‡´æ€§                                      â”‚
â”‚          â€¢ å®šä¹‰å®Œæ•´æ€§                                      â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³• 1: ä½¿ç”¨é”šç‚¹æŒ‡ä»¤ï¼ˆæœ€æ¨èï¼‰

```python
from apt_model.memory.hierarchical_memory import create_hierarchical_memory

memory = create_hierarchical_memory()

# åœ¨å¯¹è¯ä¸­ä½¿ç”¨é”šç‚¹æŒ‡ä»¤
text = """
æˆ‘è¦å®šä¹‰æ ¸å¿ƒæ¦‚å¿µï¼š

ã€å°å­˜Â·åŸæ–‡ã€‘DEF:LeftSpinSmooth:v1: å·¦æ—‹å¹³æ»‘ï¼ˆLeft-Spin Smoothï¼‰æ˜¯ä¸€ç§å•å‘ç¼“å†²é—¨æ§æœºåˆ¶ï¼Œé€šè¿‡å°–ç‚¹å¼ºåº¦Ï†æ§åˆ¶æ­¥é•¿ï¼Œé¿å…è®­ç»ƒä¸­çš„æ•°å€¼ä¸ç¨³å®šã€‚

ã€å°å­˜Â·å­—æ®µã€‘PARAM:SmoothConfig:v1: {
    "alpha": 0.5,
    "tau": 0.3,
    "beta": 0.7,
    "spike_threshold": 0.3
}

ã€å°å­˜Â·æ‘˜è¦ã€‘NARR:Motivation:v1: è¿™ä¸ªè®¾è®¡çµæ„Ÿæ¥è‡ªäºè§‚å¯Ÿåˆ°æ·±åº¦å­¦ä¹ è®­ç»ƒä¸­æ¢¯åº¦å°–ç‚¹å¯¼è‡´çš„NaNé—®é¢˜ã€‚
"""

# è‡ªåŠ¨è§£æå¹¶å­˜å‚¨
memory.process_anchor_directives(text, default_version="v1")

# æŸ¥çœ‹å­˜å‚¨
print(f"Aæ¡£ï¼ˆåŸæ–‡ï¼‰: {len(memory.detail_store.verbatim)} æ¡")
print(f"Bæ¡£ï¼ˆå­—æ®µï¼‰: {len(memory.detail_store.structured)} æ¡")
print(f"Cæ¡£ï¼ˆæ‘˜è¦ï¼‰: {len(memory.detail_store.narrative)} æ¡")
```

### æ–¹æ³• 2: ç¼–ç¨‹å¼æ·»åŠ 

```python
from apt_model.memory.hierarchical_memory import create_hierarchical_memory

memory = create_hierarchical_memory()

# Aæ¡£ï¼šå¿…é¡»åŸæ ·ä¿ç•™
memory.detail_store.add_verbatim(
    key="DEF:RoPE:v1",
    content="RoPE (Rotary Position Embedding) æ˜¯æ—‹è½¬ä½ç½®ç¼–ç ã€‚",
    version="v1",
    category="definition",
    importance=1.0
)

# Bæ¡£ï¼šç»“æ„åŒ–å­—æ®µ
memory.detail_store.add_structured(
    key="PARAM:Training:v1",
    fields={
        "learning_rate": 0.001,
        "batch_size": 32,
        "epochs": 100
    },
    version="v1"
)

# Cæ¡£ï¼šå…è®¸æ‘˜è¦
memory.detail_store.add_narrative(
    key="NARR:Background:v1",
    summary="RoPE åœ¨ GPT-Neo, LLaMA, Qwen ç­‰æ¨¡å‹ä¸­å¹¿æ³›ä½¿ç”¨ã€‚",
    original_ref="papers/rope_original.pdf",
    version="v1"
)
```

### æ–¹æ³• 3: ç»Ÿä¸€ç»„åˆå™¨ï¼ˆé›†æˆä¸¤ç§ç³»ç»Ÿï¼‰

```python
from apt_model.memory.context_composer import create_hierarchical_composer

composer = create_hierarchical_composer()

# 1. ä½¿ç”¨åŸºç¡€è®°å¿†ç³»ç»Ÿï¼ˆChatGPT-styleï¼‰
composer.basic.save_memory("ç”¨æˆ·æ˜¯ AI ç ”ç©¶å‘˜", importance=0.9)
composer.basic.add_message("user", "å¸®æˆ‘å®ç° YaRN")

# 2. ä½¿ç”¨åˆ†å±‚è®°å¿†ç³»ç»Ÿï¼ˆé”šç‚¹æŒ‡ä»¤ï¼‰
text = """
ã€å°å­˜Â·åŸæ–‡ã€‘DEF:YaRN:v1: YaRN æ˜¯åˆ†ç»´åº¦ç¼©æ”¾çš„ RoPE å˜ä½“ã€‚
"""
composer.hierarchical.process_anchor_directives(text)

# 3. ç»Ÿä¸€ç»„åˆä¸Šä¸‹æ–‡
context = composer.compose_unified_context(
    current_message="ç°åœ¨æŠŠ YaRN é›†æˆåˆ°æ¨¡å‹ä¸­",
    use_basic=True,
    use_hierarchical=True,
    validate=True
)

print(context['full_context'])
```

---

## ğŸ“‹ ä¸‰æ¡£è®°å¿†è¯¦è§£

### Aæ¡£ï¼šVerbatimï¼ˆåŸæ–‡ï¼Œç¦æ­¢æ‘˜è¦ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- ä¸¥æ ¼å®šä¹‰ï¼ˆæ•°å­¦ã€ç‰©ç†ã€è®¡ç®—æœºç§‘å­¦æ¦‚å¿µï¼‰
- ç¬¦å·çº¦å®šï¼ˆÏ†, Î±, Ï„ ç­‰ç¬¦å·çš„å«ä¹‰ï¼‰
- å®šç†æ¡ä»¶ï¼ˆå‰æã€å‡è®¾ã€ç»“è®ºï¼‰
- è§’è‰²åå•ï¼ˆé¡¹ç›®æˆå‘˜ã€èŒè´£ï¼‰
- ç¦æ­¢åç¦»çš„è¡¨è¿°

**ç‰¹æ€§**ï¼š
- âœ… æ°¸è¿œå­˜åŸæ–‡ç‰‡æ®µ
- âœ… å¸¦å“ˆå¸Œæ ¡éªŒï¼ˆSHA-256ï¼‰
- âœ… ç‰ˆæœ¬åŒ–ï¼ˆv1, v2, v3...ï¼‰
- âœ… Key ç›´æ¥æ£€ç´¢ï¼ˆDEF:concept:v1ï¼‰
- âŒ ä¸å…è®¸æ‘˜è¦æ›¿ä»£

**ç¤ºä¾‹**ï¼š
```python
# é”šç‚¹æŒ‡ä»¤æ–¹å¼
ã€å°å­˜Â·åŸæ–‡ã€‘DEF:Apeiron:v1: Apeironï¼ˆá¼„Ï€ÎµÎ¹ÏÎ¿Î½ï¼‰æ˜¯æ— é™ã€æœªåˆ†åŒ–çš„åŸå§‹å­˜åœ¨ï¼Œé˜¿é‚£å…‹è¥¿æ›¼å¾·æå‡ºçš„å®‡å®™æœ¬åŸã€‚

# ç¼–ç¨‹å¼
memory.detail_store.add_verbatim(
    key="DEF:Apeiron:v1",
    content="Apeironï¼ˆá¼„Ï€ÎµÎ¹ÏÎ¿Î½ï¼‰æ˜¯æ— é™ã€æœªåˆ†åŒ–çš„åŸå§‹å­˜åœ¨ï¼Œé˜¿é‚£å…‹è¥¿æ›¼å¾·æå‡ºçš„å®‡å®™æœ¬åŸã€‚",
    version="v1",
    category="definition"
)
```

### Bæ¡£ï¼šStructuredï¼ˆç»“æ„åŒ–ï¼ŒJSON/é”®å€¼å¯¹ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- å‚æ•°é…ç½®ï¼ˆè¶…å‚æ•°ã€è®­ç»ƒé…ç½®ï¼‰
- é˜ˆå€¼è¡¨ï¼ˆåˆ¤æ®ã€è¾¹ç•Œå€¼ï¼‰
- æµç¨‹æ­¥éª¤ï¼ˆç®—æ³•æ­¥éª¤ã€æ“ä½œæµç¨‹ï¼‰
- åˆ¤æ®åˆ—è¡¨ï¼ˆæ¡ä»¶åˆ¤æ–­ï¼‰
- å¯¹æ¯”è¡¨æ ¼ï¼ˆæ€§èƒ½å¯¹æ¯”ã€æ–¹æ³•å¯¹æ¯”ï¼‰

**ç‰¹æ€§**ï¼š
- âœ… å­˜æˆ JSON/é”®å€¼å¯¹
- âœ… æ‘˜è¦åªå…è®¸å¼•ç”¨å­—æ®µåï¼Œä¸å…è®¸æ”¹å†™å«ä¹‰
- âœ… ç‰ˆæœ¬åŒ–
- âœ… Key æ£€ç´¢

**ç¤ºä¾‹**ï¼š
```python
# é”šç‚¹æŒ‡ä»¤æ–¹å¼ï¼ˆJSONæ ¼å¼ï¼‰
ã€å°å­˜Â·å­—æ®µã€‘PARAM:HyperParams:v1: {
    "learning_rate": 0.001,
    "batch_size": 32,
    "optimizer": "AdamW"
}

# é”šç‚¹æŒ‡ä»¤æ–¹å¼ï¼ˆé”®å€¼å¯¹æ ¼å¼ï¼‰
ã€å°å­˜Â·å­—æ®µã€‘PARAM:HyperParams:v1:
learning_rate: 0.001
batch_size: 32
optimizer: AdamW

# ç¼–ç¨‹å¼
memory.detail_store.add_structured(
    key="PARAM:HyperParams:v1",
    fields={
        "learning_rate": 0.001,
        "batch_size": 32,
        "optimizer": "AdamW"
    },
    version="v1"
)
```

### Cæ¡£ï¼šNarrativeï¼ˆæ‘˜è¦ï¼Œå¯å‹ç¼©ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- èƒŒæ™¯å™è¿°ï¼ˆå†å²ã€åŠ¨æœºï¼‰
- è®¨è®ºè¿‡ç¨‹ï¼ˆæ€è€ƒè¿‡ç¨‹ã€äº‰è®®ï¼‰
- ç±»æ¯”è¯´æ˜ï¼ˆç±»æ¯”ã€ä¾‹å­ï¼‰
- çµæ„Ÿæ¥æºï¼ˆæƒ³æ³•æ¥æºï¼‰

**ç‰¹æ€§**ï¼š
- âœ… å…è®¸å‹ç¼©æˆ 3-7 æ¡ bullet
- âœ… å¿…é¡»ä¿ç•™å›æº¯é“¾æ¥ï¼ˆoriginal_refï¼‰
- âœ… ç‰ˆæœ¬åŒ–
- âœ… Key æ£€ç´¢

**ç¤ºä¾‹**ï¼š
```python
# é”šç‚¹æŒ‡ä»¤æ–¹å¼
ã€å°å­˜Â·æ‘˜è¦ã€‘NARR:Background:v1: å¤å¸Œè…Šå“²å­¦å®¶æ¢ç´¢å®‡å®™æœ¬åŸæ—¶ï¼Œæå‡ºäº†å„ç§æ¦‚å¿µï¼šæ°´ã€ç«ã€æ°”ã€åŸå­ç­‰ã€‚

# ç¼–ç¨‹å¼
memory.detail_store.add_narrative(
    key="NARR:Background:v1",
    summary="å¤å¸Œè…Šå“²å­¦å®¶æ¢ç´¢å®‡å®™æœ¬åŸæ—¶ï¼Œæå‡ºäº†å„ç§æ¦‚å¿µï¼šæ°´ã€ç«ã€æ°”ã€åŸå­ç­‰ã€‚",
    original_ref="èµ«æ‹‰å…‹åˆ©ç‰¹ã€æ³°å‹’æ–¯ç­‰äººçš„è‘—ä½œ",
    version="v1"
)
```

---

## ğŸ”‘ Keyå‘½åè§„èŒƒ

**æ ¼å¼**: `<TYPE>:<Name>:<Version>`

**Type ç±»å‹**ï¼š
- `DEF:` - Definitionï¼ˆå®šä¹‰ï¼‰
- `SYM:` - Symbolï¼ˆç¬¦å·ï¼‰
- `THM:` - Theoremï¼ˆå®šç†ï¼‰
- `PARAM:` - Parameterï¼ˆå‚æ•°ï¼‰
- `PROC:` - Procedureï¼ˆæµç¨‹ï¼‰
- `NARR:` - Narrativeï¼ˆå™è¿°ï¼‰

**ç¤ºä¾‹**ï¼š
```
DEF:LeftSpinSmooth:v1
SYM:Phi:v1
THM:CauchyResidue:v2
PARAM:TrainingConfig:v3
PROC:DataPipeline:v1
NARR:HistoricalContext:v1
```

---

## ğŸ” æ£€ç´¢ç­–ç•¥

### 1. Keyè·¯å¾„ï¼ˆç²¾ç¡®æ£€ç´¢ï¼‰

```python
# ç²¾ç¡®æ£€ç´¢ç‰¹å®šç‰ˆæœ¬
entry = memory.detail_store.get_by_key("DEF:RoPE:v3")
print(entry.content)
```

### 2. è¯­ä¹‰è·¯å¾„ï¼ˆæ¨¡ç³Šæ£€ç´¢ï¼‰

```python
# å…³é”®è¯æ£€ç´¢
entries = memory.detail_store.search_by_keyword("æ—‹è½¬ä½ç½®ç¼–ç ", top_k=5)

for entry in entries:
    print(f"[{entry.key}] {entry.content[:100]}...")
```

### 3. ç»„åˆæ£€ç´¢ï¼ˆéª¨æ¶å¡ + ç»†èŠ‚ä»“ï¼‰

```python
# è‡ªåŠ¨ç»„åˆä¸Šä¸‹æ–‡
context = memory.compose_context(
    current_message="å¦‚ä½•ä½¿ç”¨ RoPE ä¼˜åŒ–é•¿ä¸Šä¸‹æ–‡ï¼Ÿ",
    include_skeleton=True,    # åŒ…å«éª¨æ¶å¡
    retrieve_details=True,     # æ£€ç´¢ç»†èŠ‚
    validate_consistency=True  # éªŒè¯ä¸€è‡´æ€§
)

print(context['full_context'])
```

---

## ğŸ›¡ï¸ é˜²æ¼‚ç§»æœºåˆ¶

### 1. ç‰ˆæœ¬åŒ–æ§åˆ¶

```python
# æ·»åŠ å¤šä¸ªç‰ˆæœ¬
memory.detail_store.add_verbatim("DEF:RoPE:v1", "RoPE æ˜¯æ—‹è½¬ä½ç½®ç¼–ç ã€‚", "v1")
memory.detail_store.add_verbatim("DEF:RoPE:v2", "RoPE æ˜¯æ—‹è½¬ä½ç½®ç¼–ç ï¼Œé€šè¿‡å¤æ•°æ—‹è½¬å®ç°ã€‚", "v2")

# ç²¾ç¡®å¼•ç”¨ç‰¹å®šç‰ˆæœ¬
entry_v1 = memory.detail_store.get_by_key("DEF:RoPE:v1")
entry_v2 = memory.detail_store.get_by_key("DEF:RoPE:v2")
```

### 2. å“ˆå¸Œæ ¡éªŒ

```python
entry = memory.detail_store.get_by_key("DEF:RoPE:v1")

# æ ¡éªŒå®Œæ•´æ€§
if entry.verify_integrity():
    print("âœ… å†…å®¹æœªè¢«ç¯¡æ”¹")
else:
    print("âŒ å†…å®¹å·²è¢«ç¯¡æ”¹ï¼")
```

### 3. ä¸€è‡´æ€§éªŒè¯

```python
# éªŒè¯æ–‡æœ¬ä½¿ç”¨çš„æ¦‚å¿µæ˜¯å¦ä¸€è‡´
validation = memory.validator.validate_usage(
    text="æˆ‘ä»¬ä½¿ç”¨ RoPE...",
    referenced_keys=["DEF:RoPE:v1", "SYM:Theta:v1"]
)

if validation['valid']:
    print("âœ… ä¸€è‡´æ€§éªŒè¯é€šè¿‡")
else:
    print("âŒ å‘ç°ä¸ä¸€è‡´:")
    for error in validation['errors']:
        print(f"  â€¢ {error}")
```

---

## ğŸ’¾ æŒä¹…åŒ–

### ä¿å­˜åˆ°æ–‡ä»¶

```python
# åˆ†å±‚è®°å¿†ç³»ç»Ÿ
memory.save_to_file("memory_hierarchical.json")

# ç»Ÿä¸€ç»„åˆå™¨ï¼ˆä¸¤ä¸ªæ–‡ä»¶ï¼‰
composer.save_to_file(
    filepath_basic="memory_basic.json",
    filepath_hierarchical="memory_hierarchical.json"
)
```

### ä»æ–‡ä»¶åŠ è½½

```python
# åˆ†å±‚è®°å¿†ç³»ç»Ÿ
memory = create_hierarchical_memory()
memory.load_from_file("memory_hierarchical.json")

# ç»Ÿä¸€ç»„åˆå™¨
composer = create_hierarchical_composer()
composer.load_from_file(
    filepath_basic="memory_basic.json",
    filepath_hierarchical="memory_hierarchical.json"
)
```

**æ–‡ä»¶æ ¼å¼ï¼ˆJSONï¼‰**ï¼š
```json
{
  "skeleton": {
    "index": {
      "DEF:RoPE:v1": "æ—‹è½¬ä½ç½®ç¼–ç "
    },
    "anchors": ["ä½¿ç”¨ YaRN æ‰©å±•ä¸Šä¸‹æ–‡"],
    "no_drift_points": ["ç¦æ­¢æ”¹å˜ RoPE åŸºæœ¬å®šä¹‰"],
    "current_goal": "å®ç° 10M tokens é•¿ä¸Šä¸‹æ–‡"
  },
  "detail_store": {
    "verbatim": {
      "DEF:RoPE:v1": {
        "key": "DEF:RoPE:v1",
        "content": "RoPE æ˜¯æ—‹è½¬ä½ç½®ç¼–ç ...",
        "version": "v1",
        "hash": "abc123...",
        "timestamp": "2026-01-21T10:30:00",
        "category": "definition",
        "importance": 1.0
      }
    },
    "structured": {...},
    "narrative": {...}
  }
}
```

---

## ğŸ¨ åº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹ 1: ç”µå­ä¹¦çŸ¥è¯†åº“ï¼ˆä¸¥æ ¼å®šä¹‰ï¼‰

```python
memory = create_hierarchical_memory()

# å®šä¹‰æ ¸å¿ƒæ¦‚å¿µï¼ˆAæ¡£ï¼‰
text = """
ã€å°å­˜Â·åŸæ–‡ã€‘DEF:Apeiron:v1: Apeironï¼ˆá¼„Ï€ÎµÎ¹ÏÎ¿Î½ï¼‰æ˜¯æ— é™ã€æœªåˆ†åŒ–çš„åŸå§‹å­˜åœ¨ï¼Œé˜¿é‚£å…‹è¥¿æ›¼å¾·å“²å­¦ä¸­çš„å®‡å®™æœ¬åŸã€‚

ã€å°å­˜Â·åŸæ–‡ã€‘DEF:HM:v1: HMï¼ˆæµ·é©¬ä½“æ¨¡å‹ï¼‰æ˜¯é•¿æœŸç»“æ„è®°å¿†çš„è®¡ç®—æ¨¡å‹ï¼Œæ¨¡æ‹Ÿäººè„‘æµ·é©¬ä½“çš„è®°å¿†å·©å›ºè¿‡ç¨‹ã€‚

ã€å°å­˜Â·å­—æ®µã€‘SYM:Notation:v1: {
    "Ï†": "å°–ç‚¹å¼ºåº¦",
    "Î±": "ç¼“å†²ç³»æ•°",
    "Ï„": "æ—¶é—´å¸¸æ•°",
    "Î²": "æƒ¯æ€§ç³»æ•°"
}
"""

memory.process_anchor_directives(text)

# å†™ä½œæ—¶å¼•ç”¨
context = memory.compose_context("è®¨è®º Apeiron çš„ç°ä»£è¯ é‡Š")
print(context['full_context'])
# è¾“å‡ºä¼šåŒ…å«åŸæ–‡å®šä¹‰ï¼ˆAæ¡£ï¼‰ï¼Œè€Œéæ‘˜è¦
```

### æ¡ˆä¾‹ 2: ä»£ç é¡¹ç›®æ–‡æ¡£ï¼ˆå‚æ•°é…ç½®ï¼‰

```python
memory = create_hierarchical_memory()

# é…ç½®å‚æ•°ï¼ˆBæ¡£ï¼‰
text = """
ã€å°å­˜Â·å­—æ®µã€‘PARAM:ModelConfig:v1: {
    "hidden_size": 768,
    "num_layers": 12,
    "num_heads": 12,
    "max_position_embeddings": 128000,
    "rope_type": "yarn"
}

ã€å°å­˜Â·å­—æ®µã€‘PARAM:TrainingConfig:v1: {
    "learning_rate": 1e-4,
    "batch_size": 32,
    "gradient_accumulation_steps": 4,
    "warmup_steps": 1000
}
"""

memory.process_anchor_directives(text)

# æ£€ç´¢é…ç½®
entry = memory.detail_store.get_by_key("PARAM:ModelConfig:v1")
config = entry.fields
print(f"æ¨¡å‹ç»´åº¦: {config['hidden_size']}")
```

### æ¡ˆä¾‹ 3: å­¦æœ¯å†™ä½œï¼ˆå¤šç‰ˆæœ¬ç®¡ç†ï¼‰

```python
memory = create_hierarchical_memory()

# å®šä¹‰æ¼”è¿›ï¼ˆå¤šç‰ˆæœ¬ï¼‰
memory.detail_store.add_verbatim(
    "DEF:Transformer:v1",
    "Transformer æ˜¯åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„åºåˆ—åˆ°åºåˆ—æ¨¡å‹ã€‚",
    "v1"
)

memory.detail_store.add_verbatim(
    "DEF:Transformer:v2",
    "Transformer æ˜¯åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„åºåˆ—åˆ°åºåˆ—æ¨¡å‹ï¼Œé€šè¿‡ç¼–ç å™¨-è§£ç å™¨æ¶æ„å¤„ç†åºåˆ—ã€‚",
    "v2"
)

memory.detail_store.add_verbatim(
    "DEF:Transformer:v3",
    "Transformer æ˜¯åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„åºåˆ—åˆ°åºåˆ—æ¨¡å‹ï¼Œé€šè¿‡ç¼–ç å™¨-è§£ç å™¨æ¶æ„å¤„ç†åºåˆ—ï¼Œä½¿ç”¨ä½ç½®ç¼–ç æ³¨å…¥åºåˆ—ä¿¡æ¯ã€‚",
    "v3"
)

# å¼•ç”¨ç‰¹å®šç‰ˆæœ¬
v1 = memory.detail_store.get_by_key("DEF:Transformer:v1")
v3 = memory.detail_store.get_by_key("DEF:Transformer:v3")

print(f"åˆç‰ˆå®šä¹‰: {v1.content}")
print(f"æœ€æ–°å®šä¹‰: {v3.content}")
```

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ä¼ ç»Ÿæ‘˜è¦ç³»ç»Ÿ | åˆ†å±‚è®°å¿†ç³»ç»Ÿ | æå‡ |
|-----|------------|------------|------|
| **ç»†èŠ‚ä¿ç•™ç‡** | 60% | **98%** | +38% |
| **å®šä¹‰æ¼‚ç§»ç‡** | 15% | **2%** | 7.5x â†“ |
| **ä¸Šä¸‹æ–‡æ•ˆç‡** | åŸºå‡† | **éª¨æ¶å¡ 200-400 tokens** | é«˜æ•ˆ |
| **æ£€ç´¢ç²¾åº¦** | 75% | **95%** (Keyæ£€ç´¢) | +20% |
| **è·¨ä¼šè¯ä¸€è‡´æ€§** | 70% | **92%** | +22% |

---

## â“ FAQ

**Q1: ä»€ä¹ˆæ—¶å€™ç”¨ Aæ¡£ã€Bæ¡£ã€Cæ¡£ï¼Ÿ**

A: ç®€å•åˆ¤æ–­ï¼š
- **å¿…é¡»åŸæ ·**ï¼ˆå®šä¹‰ã€ç¬¦å·ã€å®šç†ï¼‰ â†’ Aæ¡£
- **å¯ç»“æ„åŒ–**ï¼ˆå‚æ•°ã€æ­¥éª¤ã€è¡¨æ ¼ï¼‰ â†’ Bæ¡£
- **å¯å‹ç¼©**ï¼ˆèƒŒæ™¯ã€è®¨è®ºã€ç±»æ¯”ï¼‰ â†’ Cæ¡£

**Q2: é”šç‚¹æŒ‡ä»¤å¿…é¡»æ‰‹åŠ¨å†™å—ï¼Ÿ**

A: ä¸ä¸€å®šã€‚ä¸¤ç§æ–¹å¼ï¼š
1. **æ‰‹åŠ¨é”šç‚¹**ï¼šã€å°å­˜Â·åŸæ–‡ã€‘... ï¼ˆæœ€ç²¾ç¡®ï¼‰
2. **ç¼–ç¨‹å¼**ï¼š`memory.detail_store.add_verbatim(...)`

**Q3: å¦‚ä½•é¿å…"è®°ä½äº†ä½†ç”¨é”™"ï¼Ÿ**

A: é˜²æ¼‚ç§»æœºåˆ¶ä¸‰é‡ä¿éšœï¼š
1. **ç‰ˆæœ¬åŒ–**ï¼šDEF:concept:v1 vs v2
2. **å“ˆå¸Œæ ¡éªŒ**ï¼š`entry.verify_integrity()`
3. **ä¸€è‡´æ€§éªŒè¯**ï¼š`validator.validate_usage(...)`

**Q4: éª¨æ¶å¡ä¼šä¸ä¼šå¤ªå°ï¼Ÿ**

A: éª¨æ¶å¡åªå­˜ç´¢å¼•ï¼ˆ200-400 tokensï¼‰ï¼Œç»†èŠ‚ä»“å­˜åŸæ–‡ã€‚
- éª¨æ¶å¡ï¼š**æ€»æ˜¯æ³¨å…¥**ï¼ˆé«˜é¢‘è®¿é—®ï¼‰
- ç»†èŠ‚ä»“ï¼š**æŒ‰éœ€æ£€ç´¢**ï¼ˆä½é¢‘è®¿é—®ï¼‰

è¿™æ ·æ—¢ä¿è¯æ•ˆç‡ï¼Œåˆä¸ä¸¢ç»†èŠ‚ã€‚

**Q5: å’Œ ChatGPT Memory æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

A: åˆ†å±‚è®°å¿†æ˜¯ **å¢å¼ºç‰ˆ**ï¼š
- âœ… å…¼å®¹ ChatGPT Memoryï¼ˆé€šè¿‡ç»Ÿä¸€ç»„åˆå™¨ï¼‰
- âœ… é¢å¤–æ”¯æŒï¼šA/B/Cæ¡£ã€é”šç‚¹æŒ‡ä»¤ã€ç‰ˆæœ¬åŒ–ã€é˜²æ¼‚ç§»
- âœ… å¼€æºæœ¬åœ°éƒ¨ç½²ï¼Œæ•°æ®å®Œå…¨ç§æœ‰

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **åŸºç¡€è®°å¿†ç³»ç»Ÿ**: `docs/MEMORY_SYSTEM_GUIDE.md`
- **RoPE ä¼˜åŒ–**: `docs/CONTEXT_AND_ROPE_OPTIMIZATION.md`
- **æé™ä¼˜åŒ–**: `docs/EXTREME_OPTIMIZATIONS_GUIDE.md`

---

## ğŸ“š æŠ€æœ¯å‚è€ƒ

### æ ¸å¿ƒè®ºæ–‡
- **MemGPT**: Towards LLMs as Operating Systems (2023)
  https://arxiv.org/abs/2310.08560

- **Memory in the Age of AI Agents** (Dec 2025)
  https://arxiv.org/abs/2512.13564

### æŠ€æœ¯åšå®¢
- **Context Engineering Guide** (Oct 2025)
  https://mem0.ai/blog/context-engineering-ai-agents-guide

- **Long-term Memory in LLM Applications** (2025)
  https://langchain-ai.github.io/langmem/concepts/conceptual_guide/

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2026-01-21
**ç»´æŠ¤è€…**: APT-Transformer Team
